{"version":3,"sources":["calendar.js"],"names":["TZ","moment","tz","guess","CLIENT_ID","CLIENT_SECRET","SCOPE","REDIRECT_URL","PROXY","BASE_URL","API_URL","getUrlParam","name","results","RegExp","exec","window","location","href","decodeURI","undefined","calendar","url","hasToken","getEvents","accessToken","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","DONE","status","res","JSON","parse","responseText","console","log","options","client_id","client_secret","grant_type","code","redirect_uri","send"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,KAAKC,OAAOC,EAAP,CAAUC,KAAV,EAAX;AACA,IAAMC,YAAY,kCAAlB;AACA,IAAMC,gBAAgB,wFAAtB;AACA,IAAMC,QAAQ,aAAd;AACA,IAAMC,eAAe,uBAArB;AACA,IAAMC,QAAQ,wBAAd;AACA,IAAMC,WAAW,2DAAjB;AACA,IAAMC,UAAU,sCAAhB;;AAEA,IAAMC,cAAc,SAAdA,WAAc,CAACC,IAAD,EAAU;AAC1B,QAAIC,UAAU,IAAIC,MAAJ,CAAW,UAAUF,IAAV,GAAiB,WAA5B,EAAyCG,IAAzC,CAA8CC,OAAOC,QAAP,CAAgBC,IAA9D,CAAd;AACA,WAAO,CAAC,CAACL,OAAF,GAAYM,UAAUN,QAAQ,CAAR,CAAV,CAAZ,GAAoCO,SAA3C;AACH,CAHD;;AAKO,IAAMC,8BAAY,YAAM;AAC3B,QAAMC,MAAM,KAAGb,QAAH,oBACUL,SADV,yBAEcC,aAFd,wBAGaE,YAHb,iBAIMD,KAJN,CAAZ;;AAMA,QAAMiB,WAAW,SAAXA,QAAW,GAAM;AACnB,eAAO,CAAC,CAACZ,YAAY,MAAZ,CAAT;AACH,KAFD;;AAIC,QAAMa,YAAY,SAAZA,SAAY,GAAM;AACpB,YAAIC,cAAcd,YAAY,MAAZ,CAAlB;AACA,YAAIe,MAAM,IAAIC,cAAJ,EAAV;AACA,YAAIL,MAAM,+FAAV;AACAI,YAAIE,IAAJ,CAAS,KAAT,EAAgBN,GAAhB,EAAqB,IAArB;AACAI,YAAIG,gBAAJ,CAAqB,eAArB,cAAgDJ,WAAhD;AACAC,YAAIG,gBAAJ,CAAqB,cAArB,EAAqC,iCAArC;AACAH,YAAII,kBAAJ,GAAyB,YAAM;AAC3B,gBAAGJ,IAAIK,UAAJ,KAAmBJ,eAAeK,IAAlC,IAA0CN,IAAIO,MAAJ,KAAe,GAA5D,EAAiE;AAC9D;AACA,oBAAIC,MAAMC,KAAKC,KAAL,CAAWV,IAAIW,YAAf,CAAV;AACAC,wBAAQC,GAAR,CAAYL,GAAZ;AACH;AACH,SAND;AAOA,YAAMM,UAAU;AACbC,uBAAWrC,SADE;AAEbsC,2BAAerC,aAFF;AAGbsC,wBAAY,oBAHC;AAIbC,kBAAMnB,WAJO;AAKboB,0BAActC;AALD,SAAhB;AAOAmB,YAAIoB,IAAJ;AACH,KAtBD;;AAwBD,WAAO,EAAExB,QAAF,EAAOC,kBAAP,EAAiBC,oBAAjB,EAAP;AAEH,CArCuB,EAAjB","file":"calendar.js","sourcesContent":["import { CONSTANTS } from 'constants';\n\nconst TZ = moment.tz.guess();\nconst CLIENT_ID = 'hMS5DG_hTFFsYGPdaH5wavwLOfXCcXFV';\nconst CLIENT_SECRET = '5kj0dTSd4eVb_02yOTFwrQYJ5OdDjTb1qxgc0k-Xf30ZxsgEuo3U3E4_EYZpzZEDOM3AnwjcFTRx902f8Ddw_Q';\nconst SCOPE = 'read_events';\nconst REDIRECT_URL = 'http://localhost:8080';\nconst PROXY = 'http://localhost:1337/';\nconst BASE_URL = 'http://app.cronofy.com/oauth/authorize?response_type=code';\nconst API_URL = 'https://api.cronofy.com/v1/calendars';\n\nconst getUrlParam = (name) => {\n    let results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n    return !!results ? decodeURI(results[1]) : undefined;\n}\n\nexport const calendar = (() => {\n    const url = `${BASE_URL}` +\n            `&client_id=${CLIENT_ID}` +\n            `&client_secret=${CLIENT_SECRET}` +\n            `&redirect_uri=${REDIRECT_URL}` +\n            `&scope=${SCOPE}`;\n\n    const hasToken = () => {\n        return !!getUrlParam('code');\n    }\n\n     const getEvents = () => {\n         let accessToken = getUrlParam('code');\n         let xhr = new XMLHttpRequest();\n         let url = 'https://newsapi.org/v1/articles?source=cnn&sortBy=top&apiKey=16753354fab44e17869b85d2a030ac04';\n         xhr.open('GET', url, true);\n         xhr.setRequestHeader('Authorization', `Bearer ${accessToken}`);\n         xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n         xhr.onreadystatechange = () => {\n             if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\n                debugger;\n                let res = JSON.parse(xhr.responseText);\n                console.log(res);\n            }\n         }\n         const options = {\n            client_id: CLIENT_ID,\n            client_secret: CLIENT_SECRET,\n            grant_type: 'authorization_code',\n            code: accessToken,\n            redirect_uri: REDIRECT_URL\n         }\n         xhr.send();\n     }\n\n    return { url, hasToken, getEvents }\n\n})();"]}